var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,o,r,n,i){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},d="function"==typeof l[n]&&l[n],u=d.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(e,o){if(!u[e]){if(!t[e]){var r="function"==typeof l[n]&&l[n];if(!o&&r)return r(e,!0);if(d)return d(e,!0);if(a&&"string"==typeof e)return a(e);var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}s.resolve=function(o){var r=t[e][1][o];return null!=r?r:o},s.cache={};var f=u[e]=new c.Module(e);t[e][0].call(f.exports,s,f,f.exports,this)}return u[e].exports;function s(e){var t=s.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=t,c.cache=u,c.parent=d,c.register=function(e,o){t[e]=[function(e,t){t.exports=o},{}]},Object.defineProperty(c,"root",{get:function(){return l[n]}}),l[n]=c;for(var f=0;f<o.length;f++)c(o[f]);if(r){var s=c(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:"function"==typeof e&&e.amd?e(function(){return s}):i&&(this[i]=s)}}({kgW6q:[function(e,t,o){e("../../../src/background")},{"../../../src/background":"fx8Od"}],fx8Od:[function(e,t,o){chrome.runtime.onMessage.addListener((e,t,o)=>{if(console.log("\uD83D\uDCE8 Background received message:",e,"from sender:",t),e?.type==="CAPTURE"){console.log("\uD83D\uDCF8 Starting viewport capture for tab:",t.tab?.id,"window:",t.tab?.windowId);let e=async()=>{try{let e=await new Promise((e,o)=>{chrome.tabs.captureVisibleTab(t.tab.windowId,{format:"png"},t=>{chrome.runtime.lastError?o(Error(chrome.runtime.lastError.message)):e(t)})});console.log("\uD83D\uDCF8 Capture completed, dataUrl length:",e?.length);let r=await new Promise((e,o)=>{chrome.tabs.get(t.tab.id,t=>{chrome.runtime.lastError?o(Error(chrome.runtime.lastError.message)):e(t)})});console.log("\uD83D\uDCCA Tab info:",{width:r.width,height:r.height}),console.log("\u2705 Sending response to content script"),o({ok:!0,dataUrl:e})}catch(e){console.error("\u274c Capture error:",e),o({ok:!1,error:e.message})}};return e(),!0}if(e?.type==="CAPTURE_FULL_PAGE"){console.log("\uD83D\uDCF8 Starting full page capture for tab:",t.tab?.id);let e=async()=>{try{let e=await chrome.scripting.executeScript({target:{tabId:t.tab.id},func:r});if(e&&e[0]&&e[0].result){let t=e[0].result,{dataUrl:r,pageDimensions:n}=t;console.log("\uD83D\uDCF8 Full page capture completed, dataUrl length:",r?.length),console.log("\uD83D\uDCCA Page dimensions:",n),o({ok:!0,dataUrl:r,pageDimensions:n})}else throw Error("Failed to capture full page")}catch(e){console.error("\u274c Full page capture error:",e),o({ok:!1,error:e.message})}};return e(),!0}});function r(){return new Promise(e=>{let t=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth),o=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),r=document.createElement("canvas");r.width=t,r.height=o;let n=r.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,t,o);let i=(e,t=0,o=0)=>{if(e.nodeType===Node.TEXT_NODE){let r=e.textContent?.trim();if(r){let i=e.parentElement;if(i){let e=i.getBoundingClientRect(),l=window.getComputedStyle(i);n.fillStyle=l.color||"#000000",n.font=`${l.fontWeight||"normal"} ${l.fontSize||"16px"} ${l.fontFamily||"Arial"}`,n.textAlign="left",n.textBaseline="top";let d=t+e.left,u=o+e.top+parseInt(l.fontSize)||16,a=e.width,c=r.split(" "),f="",s=u;for(let e=0;e<c.length;e++){let t=f+c[e]+" ",o=n.measureText(t),r=o.width;r>a&&e>0?(n.fillText(f,d,s),f=c[e]+" ",s+=parseInt(l.lineHeight)||parseInt(l.fontSize)||16):f=t}n.fillText(f,d,s)}}return}if(e.nodeType===Node.ELEMENT_NODE){let r=e.getBoundingClientRect(),l=window.getComputedStyle(e);if("none"===l.display||"hidden"===l.visibility||0===parseFloat(l.opacity))return;l.backgroundColor&&"rgba(0, 0, 0, 0)"!==l.backgroundColor&&"transparent"!==l.backgroundColor&&(n.fillStyle=l.backgroundColor,n.fillRect(t+r.left,o+r.top,r.width,r.height)),l.borderWidth&&"0px"!==l.borderWidth&&(n.strokeStyle=l.borderColor||"#000000",n.lineWidth=parseInt(l.borderWidth)||1,n.strokeRect(t+r.left,o+r.top,r.width,r.height));for(let r=0;r<e.childNodes.length;r++)i(e.childNodes[r],t,o)}};i(document.body);let l=r.toDataURL("image/png");e({dataUrl:l,pageDimensions:{width:t,height:o}})})}},{}]},["kgW6q"],"kgW6q","parcelRequire025f"),globalThis.define=t;